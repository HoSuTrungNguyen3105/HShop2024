﻿@{
    Layout = "_LayoutCustomer";
}

<!-- Single Page Header start -->
@RenderSection("BreadCum", required: false)
<!-- Single Page Header End -->
<!-- Shop Start-->
<div class="container-fluid fruite py-5">
    <div class="container py-5">
        <h1 class="mb-4">HSHOP 2024</h1>
        <div class="row g-4">
            <div class="col-lg-12">
                <div class="row g-4">
                    <div class="col-xl-3">
                        @await Html.PartialAsync("_TimKiemPanel")
                    </div>
                    <div class="col-6"></div>
                    <div class="col-xl-3">
                        <div class="bg-light ps-3 py-3 rounded d-flex justify-content-between mb-4">
                            <label for="sorting">Default Sorting:</label>
                            <select id="sorting" name="sortOrder" class="border-0 form-select-sm bg-light me-3" onchange="applySorting()">
                                <option value="">Nothing</option>
                                <option value="isorganic">Organic</option>
                                <option value="isfantastic">Fantastic</option>
                                <option value="mostviewed">Lượt mua nhiều nhất</option>
                                <option value="fewestviews">Lượt mua ít nhất</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row g-4">
                    <div class="col-lg-3">
                        <div class="row g-4">
                            @await Component.InvokeAsync("MenuLoai")
                              <div class="col-lg-12">
                              <div id="voucherSection">
                                   <!-- Voucher list will be loaded here -->
                              </div>
                            </div>
                            <div id="toastNotification" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                                <div class="toast-header">
                                    <strong class="me-auto">Thông báo</strong>
                                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                                </div>
                                <div class="toast-body">
                                    <!-- Toast message will be inserted here -->
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="mb-3">
                                    <h4 class="mb-2">Price</h4>
                                    <input type="range" class="form-range w-100" id="rangeInput" name="rangeInput" min="0" max="5" value="0" oninput="amount.value=rangeInput.value">
                                    <output id="amount" name="amount" min-velue="0" max-value="5" for="rangeInput">0</output>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="mb-3">
                                    <h4>Additional</h4>                                  
                                    <div class="mb-2">
                                        <input type="radio" class="me-2" id="Categories-3" name="Categories-1" value="Beverages">
                                        <label for="Categories-3"> Sales</label>
                                    </div>
                                    <div class="mb-2">
                                        <input type="radio" class="me-2" id="Categories-4" name="Categories-1" value="Beverages">
                                        <label for="Categories-4"> Discount</label>
                                    </div>
                                    <div class="mb-2">
                                        <input type="radio" class="me-2" id="Categories-5" name="Categories-1" value="Beverages">
                                        <label for="Categories-5"> Expired</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <h4 class="mb-3">Featured products</h4>
                                <div class="d-flex align-items-center justify-content-start">
                                    <div class="rounded me-4" style="width: 100px; height: 100px;">
                                        <img src="~/Hinh/HangHoa/31ioCUUFnoL.jpg" class="img-fluid rounded" alt="">
                                    </div>
                                    <div>
                                        <h6 class="mb-2">
                                            Vali kéo vải Sakos Champion
                                        </h6>
                                        <div class="d-flex mb-2">
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star"></i>
                                        </div>
                                        <div class="d-flex mb-2">
                                            <h5 class="fw-bold me-2">29.99 $</h5>
                                            <h5 class="text-danger text-decoration-line-through">34.11 $</h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center justify-content-start">
                                    <div class="rounded me-4" style="width: 100px; height: 100px;">
                                        <img src="~/Hinh/HangHoa/31YOss-gC-L._AA300_.jpg" class="img-fluid rounded" alt="">
                                    </div>
                                    <div>
                                        <h6 class="mb-2">Tinh dầu nước hoa CODEDECO</h6>
                                        <div class="d-flex mb-2">
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star"></i>
                                        </div>
                                        <div class="d-flex mb-2">
                                            <h5 class="fw-bold me-2">11.99 $</h5>
                                            <h5 class="text-danger text-decoration-line-through">14.11 $</h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center justify-content-start">
                                    <div class="rounded me-4" style="width: 100px; height: 100px;">
                                        <img src="~/Hinh/HangHoa/416pdroSEkL.jpg" class="img-fluid rounded" alt="">
                                    </div>
                                    <div>
                                        <h6 class="mb-2">Giày boot cổ cao nữ Merreel Bigsize</h6>
                                        <div class="d-flex mb-2">
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star"></i>
                                        </div>
                                        <div class="d-flex mb-2">
                                            <h5 class="fw-bold me-2">8.99 $</h5>
                                            <h5 class="text-danger text-decoration-line-through">11.11 $</h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-center my-4">
                                    <a href="#" class="btn border border-secondary px-4 py-3 rounded-pill text-primary w-100">View More</a>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="position-relative">
                                    <img src="~/Hinh/HangHoa/banner.jpg" class="img-fluid w-100 rounded" alt="">
                                    <div class="position-absolute" style="top: 50%; right: 10px; transform: translateY(-50%);">
                                        <h3 class="text-secondary fw-bold"><br> Tech <br> Banner</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-9">
                        <div class="row g-4 justify-content-center">
                            @RenderBody()
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Shop End-->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- Ensure jQuery is included -->
<script>
    $(document).ready(function () {
        // Load voucher partial view via AJAX
        $.get('@Url.Action("List", "Voucher")', function (data) {
            $('#voucherSection').html(data);
        });

        // Khôi phục giá trị đã chọn từ localStorage khi trang tải lại
        loadSortingPreference();

        // Sự kiện onchange để lưu giá trị khi người dùng thay đổi
        $('#sorting').on('change', function () {
            saveSortingPreference();
            applySorting();
        });
    });
    function copyCoupon(couponId) {
        var copyText = document.getElementById(couponId);

        if (copyText) {
            copyText.select();
            copyText.setSelectionRange(0, 99999); // For mobile devices
            document.execCommand("copy");

            // Hiển thị toast thông báo mã đã được sao chép
            showToast("Mã đã được sao chép: " + copyText.value);
        } else {
            showToast("Không tìm thấy mã giảm giá.");
        }
    }

    function showToast(message) {
        var toast = document.getElementById("toast");
        var toastMessage = toast.querySelector(".toast-message");
        toastMessage.textContent = message;
        toast.classList.add("show");

        setTimeout(function () {
            toast.classList.remove("show");
        }, 3000); // Ẩn sau 3 giây
    }



    function applySorting() {
        var selectedSortOrder = document.getElementById('sorting').value;
        // Điều hướng đến action Index của HangHoaController với tham số sortOrder
        window.location.href = '/HangHoa/Index?sortOrder=' + selectedSortOrder;
    }

    function saveSortingPreference() {
        var sortingSelect = document.getElementById('sorting');
        // Lưu giá trị đã chọn vào localStorage
        localStorage.setItem('sortingPreference', sortingSelect.value);
    }

    function loadSortingPreference() {
        var savedValue = localStorage.getItem('sortingPreference');
        if (savedValue) {
            // Khôi phục giá trị đã chọn từ localStorage
            var sortingSelect = document.getElementById('sorting');
            sortingSelect.value = savedValue;
        }
    }
</script>
